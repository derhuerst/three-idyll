<!DOCTYPE html>

<html>
<head>
	<meta charset="utf-8">
	<title>My first Three.js app</title>
	<style>
html, body, canvas{
	margin: 0;
	padding: 0;
}
canvas{
	width: 100%;
	height: 100%;
}
	</style>
</head>
<body>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r71/three.js"></script>
	<script src="simplex-noise.js"></script>
	<script src="generation.js"></script>
	<script>
var size = 20;
var scene = new THREE.Scene();
var camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 1, 1000);
camera.position.z = size;
camera.position.y = size;
camera.position.x = 0;
camera.lookAt(new THREE.Vector3(0, size / 2, size / 2));

var material = new THREE.MeshNormalMaterial({
	wireframe: true
});

var renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

box = new THREE.Object3D();
box.rotation.x = -Math.PI / 2;
box.rotation.z += Math.PI / 8;
scene.add(box);

var terrain = terrain(Math.random);
terrain.layers.push(layer(layer.Base));
terrain.layers.push(layer(layer.Relief));

var plane = new THREE.PlaneGeometry(size, size, size, size);
var i, x, y;
for(x = 0; x < size; x++){
	for(y = 0; y < size; y++){
		i = x * size + y;
		plane.vertices[i].z = terrain.z(x, y);
	}
}
plane.computeFaceNormals();
plane.computeVertexNormals();
var mesh = new THREE.Mesh(plane, material);
box.add(mesh);

function render(){
	//requestAnimationFrame(render);
	renderer.render(scene, camera);
}
render();
// setInterval(function(){
// 	box.rotation.z += 0.005;
// }, 10);
	</script>
</body>
</html>
